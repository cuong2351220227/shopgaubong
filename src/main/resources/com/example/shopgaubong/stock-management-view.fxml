<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.example.shopgaubong.controller.StockManagementController"
      spacing="15" style="-fx-background-color: #f5f5f5;">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="ðŸ“¦ QUáº¢N LÃ Tá»’N KHO" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2196F3;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button fx:id="btnRefresh" text="ðŸ”„ LÃ m má»›i" onAction="#handleRefresh"
                style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 12px; -fx-padding: 8 16;"/>
    </HBox>

    <Separator/>

    <!-- Info Box -->
    <HBox spacing="10" style="-fx-background-color: #e3f2fd; -fx-padding: 12; -fx-border-radius: 5; -fx-background-radius: 5;">
        <Label text="â„¹ï¸" style="-fx-font-size: 16px;"/>
        <VBox spacing="3">
            <Label text="ðŸ’¡ HÆ°á»›ng dáº«n:" style="-fx-font-weight: bold; -fx-font-size: 13px;"/>
            <Label text="â€¢ Táº¡o má»›i: Chá»n kho + sáº£n pháº©m, nháº­p sá»‘ lÆ°á»£ng â†’ LÆ°u" style="-fx-font-size: 12px;"/>
            <Label text="â€¢ Nháº­p kho: Chá»n tá»“n kho â†’ Nháº­p sá»‘ lÆ°á»£ng â†’ Nháº­p hÃ ng" style="-fx-font-size: 12px;"/>
            <Label text="â€¢ Tá»“n kho tháº¥p Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u mÃ u Ä‘á» âš ï¸" style="-fx-font-size: 12px;"/>
        </VBox>
    </HBox>

    <!-- Search & Filter Bar -->
    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: white; -fx-padding: 15;">
        <Label text="TÃ¬m kiáº¿m:" style="-fx-font-size: 14px;"/>
        <TextField fx:id="txtSearch" promptText="TÃ¬m theo tÃªn, SKU hoáº·c kho..." 
                   prefWidth="250" style="-fx-font-size: 14px;"/>
        
        <Label text="Kho:" style="-fx-font-size: 14px;"/>
        <ComboBox fx:id="cboWarehouseFilter" prefWidth="200" style="-fx-font-size: 13px;"/>
        
        <CheckBox fx:id="cbLowStockOnly" text="âš ï¸ Chá»‰ hiá»ƒn thá»‹ tá»“n kho tháº¥p"
                  style="-fx-font-size: 13px; -fx-text-fill: #f44336;"/>
        <Region HBox.hgrow="ALWAYS"/>
    </HBox>

    <!-- Main Content: SplitPane -->
    <SplitPane dividerPositions="0.6" VBox.vgrow="ALWAYS">
        
        <!-- Left: Table -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15;">
            <Label text="DANH SÃCH Tá»’N KHO" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
            <Separator/>
            
            <TableView fx:id="stockTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colWarehouse" text="Kho" prefWidth="120"/>
                    <TableColumn fx:id="colItemSku" text="SKU" prefWidth="100"/>
                    <TableColumn fx:id="colItemName" text="Sáº£n pháº©m" prefWidth="180"/>
                    <TableColumn fx:id="colOnHand" text="Tá»“n kho" prefWidth="80"/>
                    <TableColumn fx:id="colReserved" text="ÄÃ£ giá»¯" prefWidth="80"/>
                    <TableColumn fx:id="colAvailable" text="Kháº£ dá»¥ng" prefWidth="80"/>
                    <TableColumn fx:id="colLowStockThreshold" text="NgÆ°á»¡ng" prefWidth="80"/>
                    <TableColumn fx:id="colStatus" text="Tráº¡ng thÃ¡i" prefWidth="110"/>
                </columns>
                <placeholder>
                    <Label text="ChÆ°a cÃ³ tá»“n kho nÃ o" style="-fx-text-fill: #999;"/>
                </placeholder>
            </TableView>
        </VBox>

        <!-- Right: Form -->
        <VBox spacing="12" style="-fx-background-color: white; -fx-padding: 15;">
            <Label text="THÃ”NG TIN Tá»’N KHO" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
            <Separator/>

            <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" style="-fx-background-color: white;">
                <VBox spacing="15">
                    <padding>
                        <Insets right="10"/>
                    </padding>

                    <!-- Stock Information -->
                    <VBox spacing="12">
                        <Label text="ðŸ“‹ ThÃ´ng tin cÆ¡ báº£n" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #555;"/>
                        
                        <GridPane hgap="10" vgap="12">
                            <columnConstraints>
                                <ColumnConstraints hgrow="NEVER" minWidth="120"/>
                                <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <!-- Warehouse -->
                            <Label text="Kho: *" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                   style="-fx-font-size: 13px; -fx-text-fill: #333;"/>
                            <ComboBox fx:id="cboWarehouse" prefWidth="250"
                                      GridPane.columnIndex="1" GridPane.rowIndex="0"
                                      style="-fx-font-size: 13px;"/>

                            <!-- Item -->
                            <Label text="Sáº£n pháº©m: *" GridPane.columnIndex="0" GridPane.rowIndex="1"
                                   style="-fx-font-size: 13px; -fx-text-fill: #333;"/>
                            <ComboBox fx:id="cboItem" prefWidth="250"
                                      GridPane.columnIndex="1" GridPane.rowIndex="1"
                                      style="-fx-font-size: 13px;"/>

                            <!-- On Hand -->
                            <Label text="Sá»‘ lÆ°á»£ng tá»“n: *" GridPane.columnIndex="0" GridPane.rowIndex="2"
                                   style="-fx-font-size: 13px; -fx-text-fill: #333;"/>
                            <TextField fx:id="txtOnHand" promptText="0"
                                      GridPane.columnIndex="1" GridPane.rowIndex="2"
                                      style="-fx-font-size: 13px;"/>

                            <!-- Low Stock Threshold -->
                            <Label text="NgÆ°á»¡ng cáº£nh bÃ¡o: *" GridPane.columnIndex="0" GridPane.rowIndex="3"
                                   style="-fx-font-size: 13px; -fx-text-fill: #333;"/>
                            <TextField fx:id="txtLowStockThreshold" promptText="10" text="10"
                                      GridPane.columnIndex="1" GridPane.rowIndex="3"
                                      style="-fx-font-size: 13px;"/>
                        </GridPane>
                    </VBox>

                    <Separator/>

                    <!-- Current Stock Status -->
                    <VBox spacing="12">
                        <Label text="ðŸ“Š Tráº¡ng thÃ¡i hiá»‡n táº¡i" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #555;"/>
                        
                        <GridPane hgap="10" vgap="10">
                            <columnConstraints>
                                <ColumnConstraints hgrow="NEVER" minWidth="120"/>
                                <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <Label text="Tá»“n kho:" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                   style="-fx-font-size: 13px; -fx-text-fill: #666;"/>
                            <Label fx:id="lblCurrentOnHand" text="0" GridPane.columnIndex="1" GridPane.rowIndex="0"
                                   style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #2196F3;"/>

                            <Label text="ÄÃ£ giá»¯ chá»—:" GridPane.columnIndex="0" GridPane.rowIndex="1"
                                   style="-fx-font-size: 13px; -fx-text-fill: #666;"/>
                            <Label fx:id="lblCurrentReserved" text="0" GridPane.columnIndex="1" GridPane.rowIndex="1"
                                   style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #ff9800;"/>

                            <Label text="Kháº£ dá»¥ng:" GridPane.columnIndex="0" GridPane.rowIndex="2"
                                   style="-fx-font-size: 13px; -fx-text-fill: #666;"/>
                            <Label fx:id="lblCurrentAvailable" text="0" GridPane.columnIndex="1" GridPane.rowIndex="2"
                                   style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #4CAF50;"/>
                        </GridPane>
                    </VBox>

                    <Separator/>

                    <!-- Add Stock Section -->
                    <VBox spacing="12">
                        <Label text="ðŸ“¥ Nháº­p hÃ ng vÃ o kho" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #555;"/>
                        
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Sá»‘ lÆ°á»£ng:" style="-fx-font-size: 13px;"/>
                            <TextField fx:id="txtQuantity" promptText="Nháº­p sá»‘ lÆ°á»£ng cáº§n nháº­p" prefWidth="180"
                                      style="-fx-font-size: 13px;"/>
                            <Button fx:id="btnAddStock" text="ðŸ“¥ Nháº­p hÃ ng" onAction="#handleAddStock" disable="true"
                                    style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 13px; -fx-padding: 8 16;"/>
                        </HBox>
                        
                        <Label text="ðŸ’¡ Chá»n má»™t tá»“n kho tá»« báº£ng Ä‘á»ƒ nháº­p hÃ ng" 
                               style="-fx-font-size: 11px; -fx-text-fill: #999; -fx-font-style: italic;"/>
                    </VBox>

                    <Separator/>

                    <!-- Action Buttons -->
                    <HBox spacing="10" alignment="CENTER">
                        <Button fx:id="btnSave" text="ðŸ’¾ LÆ°u" onAction="#handleSave"
                                style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 30;"/>
                        <Button fx:id="btnDelete" text="ðŸ—‘ï¸ XÃ³a" onAction="#handleDelete" disable="true"
                                style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 30;"/>
                        <Button fx:id="btnClear" text="ðŸ”„ LÃ m má»›i form" onAction="#handleClear"
                                style="-fx-background-color: #9E9E9E; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 30;"/>
                    </HBox>

                    <!-- Notes -->
                    <VBox spacing="5" style="-fx-background-color: #fff3e0; -fx-padding: 10; -fx-border-radius: 5; -fx-background-radius: 5;">
                        <Label text="ðŸ“Œ Ghi chÃº:" style="-fx-font-weight: bold; -fx-font-size: 12px;"/>
                        <Label text="â€¢ (*) lÃ  trÆ°á»ng báº¯t buá»™c" style="-fx-font-size: 11px;"/>
                        <Label text="â€¢ Kháº£ dá»¥ng = Tá»“n kho - ÄÃ£ giá»¯ chá»—" style="-fx-font-size: 11px;"/>
                        <Label text="â€¢ KhÃ´ng thá»ƒ sá»­a kho vÃ  sáº£n pháº©m khi cáº­p nháº­t" style="-fx-font-size: 11px;"/>
                        <Label text="â€¢ Sá»­ dá»¥ng 'Nháº­p hÃ ng' Ä‘á»ƒ tÄƒng tá»“n kho hiá»‡n cÃ³" style="-fx-font-size: 11px;"/>
                    </VBox>
                </VBox>
            </ScrollPane>
        </VBox>
    </SplitPane>
</VBox>
