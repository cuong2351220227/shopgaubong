<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.example.shopgaubong.controller.PaymentController"
      spacing="15" style="-fx-background-color: #f5f5f5;">
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="ðŸ’³ THANH TOÃN ÄÆ N HÃ€NG" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
    </HBox>

    <Separator/>

    <!-- Main Content Split -->
    <SplitPane dividerPositions="0.6" VBox.vgrow="ALWAYS">
        
        <!-- Left: Order Information -->
        <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 20;">
            
            <!-- Order Details Card -->
            <VBox spacing="10" style="-fx-background-color: #f8f9fa; -fx-padding: 15; -fx-border-radius: 5; -fx-background-radius: 5;">
                <Label text="ðŸ“¦ ThÃ´ng tin Ä‘Æ¡n hÃ ng" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                <Separator/>
                
                <GridPane hgap="15" vgap="8">
                    <columnConstraints>
                        <ColumnConstraints minWidth="120" prefWidth="120"/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>
                    
                    <Label text="MÃ£ Ä‘Æ¡n hÃ ng:" GridPane.columnIndex="0" GridPane.rowIndex="0"
                           style="-fx-font-weight: bold; -fx-text-fill: #555;"/>
                    <Label fx:id="lblOrderNumber" text="-" GridPane.columnIndex="1" GridPane.rowIndex="0"
                           style="-fx-font-size: 14px; -fx-text-fill: #2c3e50;"/>
                    
                    <Label text="Tráº¡ng thÃ¡i:" GridPane.columnIndex="0" GridPane.rowIndex="1"
                           style="-fx-font-weight: bold; -fx-text-fill: #555;"/>
                    <Label fx:id="lblOrderStatus" text="-" GridPane.columnIndex="1" GridPane.rowIndex="1"
                           style="-fx-font-size: 14px;"/>
                    
                    <Label text="NgÆ°á»i nháº­n:" GridPane.columnIndex="0" GridPane.rowIndex="2"
                           style="-fx-font-weight: bold; -fx-text-fill: #555;"/>
                    <Label fx:id="lblReceiverName" text="-" GridPane.columnIndex="1" GridPane.rowIndex="2"
                           style="-fx-font-size: 14px; -fx-text-fill: #2c3e50;"/>
                    
                    <Label text="SÄT:" GridPane.columnIndex="0" GridPane.rowIndex="3"
                           style="-fx-font-weight: bold; -fx-text-fill: #555;"/>
                    <Label fx:id="lblReceiverPhone" text="-" GridPane.columnIndex="1" GridPane.rowIndex="3"
                           style="-fx-font-size: 14px; -fx-text-fill: #2c3e50;"/>
                    
                    <Label text="Äá»‹a chá»‰:" GridPane.columnIndex="0" GridPane.rowIndex="4"
                           style="-fx-font-weight: bold; -fx-text-fill: #555;"/>
                    <Label fx:id="lblAddress" text="-" GridPane.columnIndex="1" GridPane.rowIndex="4"
                           wrapText="true" style="-fx-font-size: 14px; -fx-text-fill: #2c3e50;"/>
                </GridPane>
            </VBox>

            <!-- Products Table -->
            <VBox spacing="10" VBox.vgrow="ALWAYS">
                <Label text="ðŸ“‹ Danh sÃ¡ch sáº£n pháº©m" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                <TableView fx:id="orderItemsTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colProductName" text="Sáº£n pháº©m" prefWidth="250"/>
                        <TableColumn fx:id="colQuantity" text="SL" prefWidth="60" style="-fx-alignment: CENTER;"/>
                        <TableColumn fx:id="colUnitPrice" text="ÄÆ¡n giÃ¡" prefWidth="100" style="-fx-alignment: CENTER-RIGHT;"/>
                        <TableColumn fx:id="colTotal" text="ThÃ nh tiá»n" prefWidth="120" style="-fx-alignment: CENTER-RIGHT;"/>
                    </columns>
                    <placeholder>
                        <Label text="ChÆ°a cÃ³ sáº£n pháº©m" style="-fx-text-fill: #999;"/>
                    </placeholder>
                </TableView>
            </VBox>
        </VBox>

        <!-- Right: Payment Section -->
        <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 20;">
            
            <!-- Payment Method Selection -->
            <VBox spacing="10">
                <Label text="ðŸ’° PhÆ°Æ¡ng thá»©c thanh toÃ¡n" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                <Separator/>
                
                <ComboBox fx:id="paymentMethodCombo" promptText="Chá»n phÆ°Æ¡ng thá»©c thanh toÃ¡n" 
                         maxWidth="Infinity" style="-fx-font-size: 14px;"/>
            </VBox>

            <!-- Fee Breakdown -->
            <VBox spacing="10" style="-fx-background-color: #f8f9fa; -fx-padding: 15; -fx-border-radius: 5; -fx-background-radius: 5;">
                <Label text="ðŸ“Š Chi tiáº¿t thanh toÃ¡n" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #333;"/>
                <Separator/>

                <GridPane hgap="20" vgap="10">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" minWidth="120"/>
                        <ColumnConstraints hgrow="SOMETIMES" halignment="RIGHT"/>
                    </columnConstraints>

                    <Label text="Tiá»n hÃ ng:" GridPane.rowIndex="0" GridPane.columnIndex="0"
                           style="-fx-font-size: 14px; -fx-text-fill: #666;"/>
                    <Label fx:id="subtotalLabel" text="0 â‚«" GridPane.rowIndex="0" GridPane.columnIndex="1"
                           style="-fx-font-size: 14px; -fx-font-weight: bold;"/>

                    <Label text="PhÃ­ váº­n chuyá»ƒn:" GridPane.rowIndex="1" GridPane.columnIndex="0"
                           style="-fx-font-size: 14px; -fx-text-fill: #666;"/>
                    <Label fx:id="shippingFeeLabel" text="0 â‚«" GridPane.rowIndex="1" GridPane.columnIndex="1"
                           style="-fx-font-size: 14px; -fx-font-weight: bold;"/>

                    <Label text="PhÃ­ COD:" GridPane.rowIndex="2" GridPane.columnIndex="0"
                           style="-fx-font-size: 14px; -fx-text-fill: #ff6600;"/>
                    <Label fx:id="codFeeLabel" text="0 â‚«" GridPane.rowIndex="2" GridPane.columnIndex="1"
                           style="-fx-font-size: 14px; -fx-text-fill: #ff6600; -fx-font-weight: bold;"/>

                    <Label text="PhÃ­ Gateway:" GridPane.rowIndex="3" GridPane.columnIndex="0"
                           style="-fx-font-size: 14px; -fx-text-fill: #ff6600;"/>
                    <Label fx:id="gatewayFeeLabel" text="0 â‚«" GridPane.rowIndex="3" GridPane.columnIndex="1"
                           style="-fx-font-size: 14px; -fx-text-fill: #ff6600; -fx-font-weight: bold;"/>

                    <Separator GridPane.rowIndex="4" GridPane.columnSpan="2">
                        <GridPane.margin>
                            <Insets top="5" bottom="5"/>
                        </GridPane.margin>
                    </Separator>

                    <Label text="Tá»”NG Cá»˜NG:" GridPane.rowIndex="5" GridPane.columnIndex="0"
                           style="-fx-font-weight: bold; -fx-font-size: 18px; -fx-text-fill: #2c3e50;"/>
                    <Label fx:id="totalLabel" text="0 â‚«" GridPane.rowIndex="5" GridPane.columnIndex="1"
                           style="-fx-font-weight: bold; -fx-font-size: 18px; -fx-text-fill: #e74c3c;"/>
                </GridPane>
            </VBox>

            <Separator/>

            <!-- Payment Button -->
            <Button fx:id="payButton" text="ðŸ’³ THANH TOÃN NGAY" onAction="#handlePayment"
                    style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-size: 16px; -fx-font-weight: bold; -fx-cursor: hand;"
                    maxWidth="Infinity" prefHeight="50"/>

            <!-- Payment Method Details (Dynamic) -->
            <VBox fx:id="paymentDetailsBox" spacing="10" managed="false" visible="false">
                <Separator/>
                
                <!-- COD Details -->
                <VBox fx:id="codDetailsBox" spacing="8" style="-fx-background-color: #fff3cd; -fx-padding: 12; -fx-border-radius: 5; -fx-background-radius: 5;" managed="false" visible="false">
                    <Label text="ðŸ’µ Thanh toÃ¡n khi nháº­n hÃ ng (COD)" style="-fx-font-weight: bold; -fx-text-fill: #856404;"/>
                    <Separator/>
                    <Label text="â€¢ PhÃ­ COD: 2% giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (tá»‘i thiá»ƒu 10,000â‚«)" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Vui lÃ²ng chuáº©n bá»‹ Ä‘á»§ tiá»n máº·t khi nháº­n hÃ ng" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Kiá»ƒm tra hÃ ng trÆ°á»›c khi thanh toÃ¡n cho shipper" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                </VBox>
                
                <!-- Bank Transfer Details -->
                <VBox fx:id="bankTransferDetailsBox" spacing="8" style="-fx-background-color: #d1ecf1; -fx-padding: 12; -fx-border-radius: 5; -fx-background-radius: 5;" managed="false" visible="false">
                    <Label text="ðŸ¦ Chuyá»ƒn khoáº£n ngÃ¢n hÃ ng" style="-fx-font-weight: bold; -fx-text-fill: #0c5460;"/>
                    <Separator/>
                    <GridPane hgap="10" vgap="5">
                        <columnConstraints>
                            <ColumnConstraints minWidth="100" prefWidth="100"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>
                        <Label text="NgÃ¢n hÃ ng:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                        <Label text="Vietcombank - Chi nhÃ¡nh HÃ  Ná»™i" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                        
                        <Label text="Sá»‘ tÃ i khoáº£n:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                        <Label text="1234567890" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                        
                        <Label text="Chá»§ tÃ i khoáº£n:" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                        <Label text="SHOP Gáº¤U BÃ”NG" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                        
                        <Label text="Ná»™i dung CK:" GridPane.columnIndex="0" GridPane.rowIndex="3" style="-fx-font-weight: bold;"/>
                        <Label fx:id="bankTransferContent" text="-" GridPane.columnIndex="1" GridPane.rowIndex="3" 
                               style="-fx-text-fill: #e74c3c; -fx-font-weight: bold;"/>
                    </GridPane>
                    <Label text="âš ï¸ Sau khi chuyá»ƒn khoáº£n, Ä‘Æ¡n hÃ ng sáº½ Ä‘Æ°á»£c xá»­ lÃ½ trong 1-2 giá»" 
                           wrapText="true" style="-fx-font-size: 11px; -fx-text-fill: #666; -fx-font-style: italic;"/>
                </VBox>
                
                <!-- VNPay Details -->
                <VBox fx:id="vnpayDetailsBox" spacing="8" style="-fx-background-color: #cfe2ff; -fx-padding: 12; -fx-border-radius: 5; -fx-background-radius: 5;" managed="false" visible="false">
                    <Label text="ðŸ’³ VNPay - Cá»•ng thanh toÃ¡n Ä‘iá»‡n tá»­" style="-fx-font-weight: bold; -fx-text-fill: #084298;"/>
                    <Separator/>
                    <Label text="â€¢ PhÃ­ giao dá»‹ch: 2.2% giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Há»— trá»£ thanh toÃ¡n: Tháº» ATM, Visa, MasterCard, JCB, QR Code" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Giao dá»‹ch Ä‘Æ°á»£c mÃ£ hÃ³a an toÃ n vá»›i chuáº©n PCI-DSS" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Báº¥m 'Thanh toÃ¡n' Ä‘á»ƒ chuyá»ƒn Ä‘áº¿n cá»•ng VNPay" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555; -fx-font-weight: bold;"/>
                </VBox>
                
                <!-- MoMo Details -->
                <VBox fx:id="momoDetailsBox" spacing="8" style="-fx-background-color: #f8d7da; -fx-padding: 12; -fx-border-radius: 5; -fx-background-radius: 5;" managed="false" visible="false">
                    <Label text="ðŸ“± MoMo - VÃ­ Ä‘iá»‡n tá»­" style="-fx-font-weight: bold; -fx-text-fill: #842029;"/>
                    <Separator/>
                    <Label text="â€¢ PhÃ­ giao dá»‹ch: 2.5% giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Thanh toÃ¡n nhanh báº±ng vÃ­ MoMo trÃªn Ä‘iá»‡n thoáº¡i" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Há»— trá»£ liÃªn káº¿t tháº» ngÃ¢n hÃ ng hoáº·c thanh toÃ¡n tá»« sá»‘ dÆ° vÃ­" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ QuÃ©t QR code hoáº·c nháº­p OTP Ä‘á»ƒ xÃ¡c nháº­n thanh toÃ¡n" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                </VBox>
                
                <!-- SePay Details -->
                <VBox fx:id="sepayDetailsBox" spacing="8" style="-fx-background-color: #d3f9d8; -fx-padding: 12; -fx-border-radius: 5; -fx-background-radius: 5;" managed="false" visible="false">
                    <Label text="âš¡ SePay - Cá»•ng thanh toÃ¡n nhanh" style="-fx-font-weight: bold; -fx-text-fill: #0f5132;"/>
                    <Separator/>
                    <Label text="â€¢ PhÃ­ giao dá»‹ch: 1.8% giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng (Tháº¥p nháº¥t!)" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Há»— trá»£: Tháº» ATM ná»™i Ä‘á»‹a, Visa, MasterCard" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Xá»­ lÃ½ giao dá»‹ch tá»©c thÃ¬, xÃ¡c nháº­n Ä‘Æ¡n hÃ ng ngay láº­p tá»©c" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                    <Label text="â€¢ Giao diá»‡n Ä‘Æ¡n giáº£n, thanh toÃ¡n nhanh chÃ³ng" 
                           wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #555;"/>
                </VBox>
            </VBox>

        </VBox>
    </SplitPane>

</VBox>

