<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.example.shopgaubong.controller.UserManagementController"
      spacing="10" style="-fx-background-color: #f5f5f5;">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Header Section -->
    <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 0 0 10 0;">
        <Label text="ðŸ‘¥ QUáº¢N LÃ NGÆ¯á»œI DÃ™NG" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <TextField fx:id="txtSearch" promptText="ðŸ” TÃ¬m kiáº¿m tÃªn, username, email..."
                   prefWidth="300" style="-fx-font-size: 14px; -fx-padding: 8;"/>
    </HBox>

    <Separator/>

    <!-- Main Content Split -->
    <SplitPane dividerPositions="0.55" VBox.vgrow="ALWAYS">

        <!-- Left: Table View -->
        <VBox spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 5;">
            
            <!-- Table Toolbar -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Danh sÃ¡ch tÃ i khoáº£n" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <ComboBox fx:id="cmbFilterRole" promptText="Lá»c theo vai trÃ²" prefWidth="150"/>
                <ComboBox fx:id="cmbFilterStatus" promptText="Lá»c theo tráº¡ng thÃ¡i" prefWidth="150"/>
                <Button text="ðŸ”„ LÃ m má»›i" onAction="#handleRefresh"
                        style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-cursor: hand; -fx-padding: 8 15;"/>
            </HBox>

            <!-- Table -->
            <TableView fx:id="accountTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colId" text="ID" prefWidth="50"/>
                    <TableColumn fx:id="colUsername" text="TÃªn Ä‘Äƒng nháº­p" prefWidth="130"/>
                    <TableColumn fx:id="colFullName" text="Há» tÃªn" prefWidth="150"/>
                    <TableColumn fx:id="colEmail" text="Email" prefWidth="180"/>
                    <TableColumn fx:id="colPhone" text="Sá»‘ Ä‘iá»‡n thoáº¡i" prefWidth="120"/>
                    <TableColumn fx:id="colRole" text="Vai trÃ²" prefWidth="100"/>
                    <TableColumn fx:id="colStatus" text="Tráº¡ng thÃ¡i" prefWidth="100"/>
                    <TableColumn fx:id="colCreatedAt" text="NgÃ y táº¡o" prefWidth="130"/>
                </columns>
            </TableView>

            <!-- Table Stats -->
            <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-padding: 5 0 0 0;">
                <Label fx:id="lblTotalAccounts" text="Tá»•ng: 0 tÃ i khoáº£n" style="-fx-font-size: 12px; -fx-text-fill: #7f8c8d;"/>
                <Label fx:id="lblActiveAccounts" text="Äang hoáº¡t Ä‘á»™ng: 0" style="-fx-font-size: 12px; -fx-text-fill: #27ae60;"/>
                <Label fx:id="lblInactiveAccounts" text="Ngá»«ng hoáº¡t Ä‘á»™ng: 0" style="-fx-font-size: 12px; -fx-text-fill: #e74c3c;"/>
            </HBox>
        </VBox>

        <!-- Right: Form -->
        <VBox spacing="15" style="-fx-background-color: white; -fx-padding: 20; -fx-background-radius: 5;">
            
            <!-- Form Header -->
            <HBox alignment="CENTER_LEFT">
                <Label fx:id="lblFormTitle" text="ðŸ“ ThÃªm tÃ i khoáº£n má»›i" 
                       style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #34495e;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnNew" text="âž• Má»›i" onAction="#handleNew"
                        style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-cursor: hand; -fx-padding: 8 15;"/>
            </HBox>

            <Separator/>

            <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;" VBox.vgrow="ALWAYS">
                <VBox spacing="15">

                    <!-- Account Information -->
                    <VBox spacing="10">
                        <Label text="ThÃ´ng tin tÃ i khoáº£n" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #555;"/>
                        
                        <GridPane hgap="10" vgap="12">
                            <columnConstraints>
                                <ColumnConstraints minWidth="120" prefWidth="120"/>
                                <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <!-- Username -->
                            <Label text="TÃªn Ä‘Äƒng nháº­p: *" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                   style="-fx-text-fill: #e74c3c; -fx-font-weight: bold;"/>
                            <TextField fx:id="txtUsername" GridPane.columnIndex="1" GridPane.rowIndex="0"
                                       promptText="3-50 kÃ½ tá»±, chá»‰ chá»¯ vÃ  sá»‘"
                                       style="-fx-font-size: 14px;"/>

                            <!-- Password -->
                            <Label text="Máº­t kháº©u: *" GridPane.columnIndex="0" GridPane.rowIndex="1"
                                   style="-fx-text-fill: #e74c3c; -fx-font-weight: bold;"/>
                            <HBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                <PasswordField fx:id="txtPassword" HBox.hgrow="ALWAYS"
                                               promptText="Tá»‘i thiá»ƒu 6 kÃ½ tá»±"
                                               style="-fx-font-size: 14px;"/>
                                <Button fx:id="btnResetPassword" text="ðŸ”‘ Reset" onAction="#handleResetPassword"
                                        visible="false" managed="false"
                                        style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-cursor: hand;"/>
                            </HBox>

                            <!-- Role -->
                            <Label text="Vai trÃ²: *" GridPane.columnIndex="0" GridPane.rowIndex="2"
                                   style="-fx-text-fill: #e74c3c; -fx-font-weight: bold;"/>
                            <ComboBox fx:id="cmbRole" GridPane.columnIndex="1" GridPane.rowIndex="2"
                                      promptText="Chá»n vai trÃ²" maxWidth="Infinity"
                                      style="-fx-font-size: 14px;"/>

                            <!-- Status -->
                            <Label text="Tráº¡ng thÃ¡i:" GridPane.columnIndex="0" GridPane.rowIndex="3"
                                   style="-fx-font-weight: bold;"/>
                            <CheckBox fx:id="chkActive" text="Hoáº¡t Ä‘á»™ng" GridPane.columnIndex="1" GridPane.rowIndex="3"
                                      selected="true" style="-fx-font-size: 14px;"/>
                        </GridPane>
                    </VBox>

                    <Separator/>

                    <!-- Profile Information -->
                    <VBox spacing="10">
                        <Label text="ThÃ´ng tin cÃ¡ nhÃ¢n" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #555;"/>
                        
                        <GridPane hgap="10" vgap="12">
                            <columnConstraints>
                                <ColumnConstraints minWidth="120" prefWidth="120"/>
                                <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <!-- Full Name -->
                            <Label text="Há» vÃ  tÃªn: *" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                   style="-fx-text-fill: #e74c3c; -fx-font-weight: bold;"/>
                            <TextField fx:id="txtFullName" GridPane.columnIndex="1" GridPane.rowIndex="0"
                                       promptText="Nháº­p há» vÃ  tÃªn Ä‘áº§y Ä‘á»§"
                                       style="-fx-font-size: 14px;"/>

                            <!-- Email -->
                            <Label text="Email:" GridPane.columnIndex="0" GridPane.rowIndex="1"
                                   style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtEmail" GridPane.columnIndex="1" GridPane.rowIndex="1"
                                       promptText="example@email.com"
                                       style="-fx-font-size: 14px;"/>

                            <!-- Phone -->
                            <Label text="Sá»‘ Ä‘iá»‡n thoáº¡i:" GridPane.columnIndex="0" GridPane.rowIndex="2"
                                   style="-fx-font-weight: bold;"/>
                            <TextField fx:id="txtPhone" GridPane.columnIndex="1" GridPane.rowIndex="2"
                                       promptText="0xxxxxxxxx"
                                       style="-fx-font-size: 14px;"/>
                        </GridPane>
                    </VBox>

                    <Separator/>

                    <!-- Account Details (Read-only for edit mode) -->
                    <VBox spacing="10" fx:id="vboxAccountDetails" visible="false" managed="false">
                        <Label text="ThÃ´ng tin chi tiáº¿t" style="-fx-font-size: 14px; -fx-font-weight: bold; -fx-text-fill: #555;"/>
                        
                        <GridPane hgap="10" vgap="8">
                            <columnConstraints>
                                <ColumnConstraints minWidth="120" prefWidth="120"/>
                                <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <Label text="ID:" GridPane.columnIndex="0" GridPane.rowIndex="0"
                                   style="-fx-font-weight: bold; -fx-text-fill: #7f8c8d;"/>
                            <Label fx:id="lblAccountId" GridPane.columnIndex="1" GridPane.rowIndex="0"
                                   style="-fx-font-size: 13px;"/>

                            <Label text="NgÃ y táº¡o:" GridPane.columnIndex="0" GridPane.rowIndex="1"
                                   style="-fx-font-weight: bold; -fx-text-fill: #7f8c8d;"/>
                            <Label fx:id="lblCreatedDate" GridPane.columnIndex="1" GridPane.rowIndex="1"
                                   style="-fx-font-size: 13px;"/>

                            <Label text="Cáº­p nháº­t:" GridPane.columnIndex="0" GridPane.rowIndex="2"
                                   style="-fx-font-weight: bold; -fx-text-fill: #7f8c8d;"/>
                            <Label fx:id="lblUpdatedDate" GridPane.columnIndex="1" GridPane.rowIndex="2"
                                   style="-fx-font-size: 13px;"/>
                        </GridPane>
                    </VBox>

                </VBox>
            </ScrollPane>

            <!-- Form Buttons -->
            <HBox spacing="10" alignment="CENTER">
                <Button fx:id="btnSave" text="ðŸ’¾ LÆ°u" onAction="#handleSave"
                        style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-size: 14px; -fx-font-weight: bold; -fx-padding: 10 30; -fx-cursor: hand;"/>
                <Button text="âŒ Há»§y" onAction="#handleCancel"
                        style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 30; -fx-cursor: hand;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button fx:id="btnDelete" text="ðŸ—‘ï¸ XÃ³a" onAction="#handleDelete"
                        visible="false" managed="false"
                        style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 10 30; -fx-cursor: hand;"/>
            </HBox>

        </VBox>

    </SplitPane>
</VBox>
